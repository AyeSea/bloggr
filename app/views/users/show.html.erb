<div class="container">
	<h1><%= @user.full_name %>'s Page</h1>
</div>

<!-- User's Posts Section -->
<div class="container">

	<h3><%= @user.full_name %>'s Wall</h3>

	<!-- New Post Section (can only create a post on your own wall) -->
	<% if @user == current_user %>
		<%= form_for([@user, @post]) do |f| %>
			<%= f.label :content %><br>
			<%= f.text_area :content, size: "50x10" %><br>

			<%= f.submit "Create Post!" %>
			<%= f.hidden_field :id, value: @user %>
		<% end %>

	<% end %>

	<!-- List of User's Posts -->
	<% @user.posts.each do |post| %>
		<!-- Hiding @post which is a blank post instantiated for use in the new post section above -->
		<% unless @post == post %>

			<p>Post: <%= post.content %></p>
			<p>Date: <%= post.created_at %></p>
			<p><%= pluralize(post.likes.count, "like") %></p>

			<!-- add a like if you haven't already liked this post -->
			<% unless post.likes.find_by(user_id: current_user.id) %>
			<p class="btn btn-default"><%= link_to "Like", likes_path(post_id: post.id), method: :post %></p>
			<!-- unlike this post if you've liked it already -->
			<% else %>
			<p class="btn btn-default"><%= link_to "Unlike", like_path(post_id: post.id), method: :delete %></p>
			<% end %>

			<!-- current user can delete his/her posts -->
			<% if @user == current_user %>
			<p><%= link_to "Remove Post", user_post_path(user_id: @user, id: post), method: :delete %></p>
			<% end %>

		<% end %>

	<% end %>

</div>

<!-- User's Friends Section -->
<div class="container">
	<h3>Friends</h3>

	<% @user.friends.each do |friend| %>
		<p><%= friend.first_name %> <%= friend.last_name %></p>
		
		<p><%= link_to "View Profile", friend %></p>

		<!-- User can only remove friends for their own account -->
		<% if @user == current_user %>
		<p><%= link_to "Remove Friend", friendship_path(friend_id: friend), method: :delete %></p>
		<% end %>
	<% end %>

	<%= link_to "Find more friends!", users_path %>
</div>